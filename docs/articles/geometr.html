<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>geometr - An overview • geometr</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/all.min.css" integrity="sha256-nAmazAk6vS34Xqo0BSrTb+abbtFlgsFK7NKSi6o7Y78=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/v4-shims.min.css" integrity="sha256-6qHlizsOWFskGlwVOKuns+D1nB6ssZrHQrNj1wGplHc=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/headroom.min.js" integrity="sha256-DJFC1kqIhelURkuza0AvYal5RxMtpzLjFhsnVIeuk+U=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="geometr - An overview">
<meta property="og:description" content="">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">geometr</a>
        <span class="version label label-danger" data-toggle="tooltip" data-placement="bottom" title="Unreleased version">0.2.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../articles/geometr.html">Get Started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="http://www.twitter.com/DerEhrmann">
    <span class="fa fa-twitter fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="https://github.com/EhrmannS/geometr">
    <span class="fa fa-github"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1>geometr - An overview</h1>
                        <h4 class="author">Steffen Ehrmann</h4>
            
            <h4 class="date">2019-11-07</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/EhrmannS/geometr/blob/master/vignettes/geometr.Rmd"><code>vignettes/geometr.Rmd</code></a></small>
      <div class="hidden name"><code>geometr.Rmd</code></div>

    </div>

    
    
<div id="introduction" class="section level1">
<h1 class="hasAnchor">
<a href="#introduction" class="anchor"></a>Introduction</h1>
<p>The <code>geometr</code> package provides tools that generate and process easily accessible and tidy geometric shapes (of class <code>geom</code>). Moreover, <code>geometr</code> aims to improve interoperability of geometric classes. One could argue that spatial classes are merely a special case of geometric classes, where the points’ coordinates refer to real locations on the surface of the earth, specified in further detail by the coordinate reference system (crs). For ordinary geometric shapes (such as squares or circles), the coordinate (reference) system is the <em>cartesian coordinate system</em>. <code>geometr</code> makes the generalisation to treat all geometric and spatial classes in the same way, and thus both of them are termed <em>geometric objects/classes</em> here.</p>
<p>Geometric classes contain typically a collection of points that outline the geometric shapes or features. A feature in <code>geometr</code> is defined as a set of points that form no more than one single unit of a given feature type (point, line and polygon) and, in contrast to the simple features <a href="http://www.opengeospatial.org/standards/sfa" target="_blank">standard</a>, there are no <em>multi-*</em> features. Sets of geometric objects that belong together beyond their geometric connectedness are assigned a common group, that can have its own group attributes (more on this in the chapter <a href="#attributes-of-a-geom">Attributes of a <code>geom</code></a>). Features are characterised by a location, some coordinate (reference) system, and various other properties or metadata. Most geometric classes are conceptually quite similar, yet a common, interoperable standard lacks for accessing and modifying features, their points or the metadata.</p>
<p>This vignette outlines in detail first how <code>geometr</code> improves interoperability, then it describes the datastructure of a <code>geom</code> (the geometric class that comes with <code>geometr</code>), how different feature types are cast into one another, shows how to visualise geometric objects and eventually gives a short introduction of the tools that come with this first version of <code>geometr</code>.</p>
</div>
<div id="interoperability" class="section level1">
<h1 class="hasAnchor">
<a href="#interoperability" class="anchor"></a>Interoperability</h1>
<p><a href="https://en.wikipedia.org/wiki/Interoperability" target="_blank">Interoperable software</a> can easily exchange information with other software, which can be achieved by providing the output of functionally similar operations in a common arrangement or format. This principle is not only true for software written in different languages, but can also apply to several packages within the R ecosystem. R is an open source environment which means that no single package or class will ever be the sole source of a particular datastructure and this is also the case for spatial and other geometric data.</p>
<p>Interoperable data is data that has a common arrangement and that uses terms from the same <a href="http://www-ksl.stanford.edu/kst/what-is-an-ontology.html" target="_blank">ontology</a>, resulting ideally in <a href="https://en.wikipedia.org/wiki/Semantic_interoperability" target="_blank">semantic interoperability</a>. As an example, we can think of the extent of a geometric object. An extent reports the minimum and maximum value of all dimensions an object resides in. There are, however, several ways in which even this simple information can be reported, for example as vector or as table and with or without names. Moreover, distinct workflows provide data so that the same information is not at the same location or with the same name in all structures, e.g., the minimum value of the x dimension is not always the first information and is not always called ‘xmin’.</p>
<p>The following code chunk exemplifies this by showing various functions, which are all considered standard in R to date, that derive an extent from specific spatial objects:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" data-line-number="1"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(sf)</a>
<a class="sourceLine" id="cb1-2" data-line-number="2"><span class="co">#&gt; Linking to GEOS 3.5.1, GDAL 2.2.2, PROJ 4.9.2</span></a>
<a class="sourceLine" id="cb1-3" data-line-number="3">nc_sf &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/pkg/sf/man/st_read.html">st_read</a></span>(<span class="kw"><a href="https://rdrr.io/r/base/system.file.html">system.file</a></span>(<span class="st">"shape/nc.shp"</span>, <span class="dt">package=</span><span class="st">"sf"</span>))</a>
<a class="sourceLine" id="cb1-4" data-line-number="4"><span class="co">#&gt; Reading layer `nc' from data source `/home/steffen/R/x86_64-pc-linux-gnu-library/3.6/sf/shape/nc.shp' using driver `ESRI Shapefile'</span></a>
<a class="sourceLine" id="cb1-5" data-line-number="5"><span class="co">#&gt; Simple feature collection with 100 features and 14 fields</span></a>
<a class="sourceLine" id="cb1-6" data-line-number="6"><span class="co">#&gt; geometry type:  MULTIPOLYGON</span></a>
<a class="sourceLine" id="cb1-7" data-line-number="7"><span class="co">#&gt; dimension:      XY</span></a>
<a class="sourceLine" id="cb1-8" data-line-number="8"><span class="co">#&gt; bbox:           xmin: -84.32385 ymin: 33.88199 xmax: -75.45698 ymax: 36.58965</span></a>
<a class="sourceLine" id="cb1-9" data-line-number="9"><span class="co">#&gt; epsg (SRID):    4267</span></a>
<a class="sourceLine" id="cb1-10" data-line-number="10"><span class="co">#&gt; proj4string:    +proj=longlat +datum=NAD27 +no_defs</span></a>
<a class="sourceLine" id="cb1-11" data-line-number="11"><span class="kw"><a href="https://rdrr.io/pkg/sf/man/st_bbox.html">st_bbox</a></span>(nc_sf)</a>
<a class="sourceLine" id="cb1-12" data-line-number="12"><span class="co">#&gt;      xmin      ymin      xmax      ymax </span></a>
<a class="sourceLine" id="cb1-13" data-line-number="13"><span class="co">#&gt; -84.32385  33.88199 -75.45698  36.58965</span></a>
<a class="sourceLine" id="cb1-14" data-line-number="14"></a>
<a class="sourceLine" id="cb1-15" data-line-number="15"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(sp)</a>
<a class="sourceLine" id="cb1-16" data-line-number="16">nc_sp &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/pkg/sf/man/coerce-methods.html">as_Spatial</a></span>(nc_sf)</a>
<a class="sourceLine" id="cb1-17" data-line-number="17"><span class="kw"><a href="https://rdrr.io/pkg/sp/man/bbox.html">bbox</a></span>(nc_sp)</a>
<a class="sourceLine" id="cb1-18" data-line-number="18"><span class="co">#&gt;         min       max</span></a>
<a class="sourceLine" id="cb1-19" data-line-number="19"><span class="co">#&gt; x -84.32385 -75.45698</span></a>
<a class="sourceLine" id="cb1-20" data-line-number="20"><span class="co">#&gt; y  33.88199  36.58965</span></a>
<a class="sourceLine" id="cb1-21" data-line-number="21"></a>
<a class="sourceLine" id="cb1-22" data-line-number="22"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(raster)</a>
<a class="sourceLine" id="cb1-23" data-line-number="23">ras &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/pkg/raster/man/raster.html">raster</a></span>(<span class="kw"><a href="https://rdrr.io/r/base/system.file.html">system.file</a></span>(<span class="st">"external/test.grd"</span>, <span class="dt">package=</span><span class="st">"raster"</span>))</a>
<a class="sourceLine" id="cb1-24" data-line-number="24"><span class="kw"><a href="https://rdrr.io/pkg/raster/man/extent.html">extent</a></span>(ras)</a>
<a class="sourceLine" id="cb1-25" data-line-number="25"><span class="co">#&gt; class      : Extent </span></a>
<a class="sourceLine" id="cb1-26" data-line-number="26"><span class="co">#&gt; xmin       : 178400 </span></a>
<a class="sourceLine" id="cb1-27" data-line-number="27"><span class="co">#&gt; xmax       : 181600 </span></a>
<a class="sourceLine" id="cb1-28" data-line-number="28"><span class="co">#&gt; ymin       : 329400 </span></a>
<a class="sourceLine" id="cb1-29" data-line-number="29"><span class="co">#&gt; ymax       : 334000</span></a></code></pre></div>
<p><code><a href="https://rdrr.io/pkg/sf/man/st_bbox.html">st_bbox()</a></code> provides the information as a named vector and presents first minimum and then maximum values of both dimensions, <code><a href="https://rdrr.io/pkg/sp/man/bbox.html">bbox()</a></code> provides a table with minimum and maximum values in columns and <code><a href="https://rdrr.io/pkg/raster/man/extent.html">extent()</a></code> provides the information in an S4 object that presents first the x and then the y values. Neither data structures, nor names or positions of the information are comparable.</p>
<p>For a human user the structure of those information might not matter, because we recognise, in most cases intuitively, where which information is to be found in a datastructure. In the above case it is easy to recognise how the combination of column and rownames (of <code><a href="https://rdrr.io/pkg/sp/man/bbox.html">bbox()</a></code>) refers to the already combined names (of <code><a href="https://rdrr.io/pkg/sf/man/st_bbox.html">st_bbox()</a></code> or <code><a href="https://rdrr.io/pkg/raster/man/extent.html">extent()</a></code>). However, this capacity of humans to recognise information relative to the context needs to be programmed into software, for it to have that ability. Think, for example, of a new custom function that is designed to extract and process information from an arbitrary spatial input, i.e., without knowing in advance what spatial class the user will provide. This would require an extensive code-logic to handle all possible input formats, complicated further by classes that may become available only in the future.</p>
<p><code>geometr</code> improves interoperability in R for geometric and thus spatial classes by following the <a href="https://www.bioconductor.org/help/course-materials/2017/Zurich/S4-classes-and-methods.html#api-vs-internals" target="_blank">Bioconductor standard for S4 classes</a>. Here, <em>getters</em> and <em>setters</em> are used as accessor functions, and as pathway to extract or modify information of a given data structure. <code>geometr</code> thus provides getters that provide information in identical arrangement from a wide range of classes, and likewise setters that modify different classes in the same way, despite those classes typically need differently formatted input, arguments and functions. The following code chunk shows how different input classes yield the same output object.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb2-1" data-line-number="1"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(geometr)</a>
<a class="sourceLine" id="cb2-2" data-line-number="2">myInput &lt;-<span class="st"> </span>nc_sf</a>
<a class="sourceLine" id="cb2-3" data-line-number="3"><span class="kw"><a href="../reference/getExtent.html">getExtent</a></span>(<span class="dt">x =</span> myInput)</a>
<a class="sourceLine" id="cb2-4" data-line-number="4"><span class="co">#&gt; Registered S3 method overwritten by 'cli':</span></a>
<a class="sourceLine" id="cb2-5" data-line-number="5"><span class="co">#&gt;   method     from    </span></a>
<a class="sourceLine" id="cb2-6" data-line-number="6"><span class="co">#&gt;   print.boxx spatstat</span></a>
<a class="sourceLine" id="cb2-7" data-line-number="7"><span class="co">#&gt; # A tibble: 2 x 2</span></a>
<a class="sourceLine" id="cb2-8" data-line-number="8"><span class="co">#&gt;       x     y</span></a>
<a class="sourceLine" id="cb2-9" data-line-number="9"><span class="co">#&gt;   &lt;dbl&gt; &lt;dbl&gt;</span></a>
<a class="sourceLine" id="cb2-10" data-line-number="10"><span class="co">#&gt; 1 -84.3  33.9</span></a>
<a class="sourceLine" id="cb2-11" data-line-number="11"><span class="co">#&gt; 2 -75.5  36.6</span></a>
<a class="sourceLine" id="cb2-12" data-line-number="12"></a>
<a class="sourceLine" id="cb2-13" data-line-number="13">myInput &lt;-<span class="st"> </span>nc_sp</a>
<a class="sourceLine" id="cb2-14" data-line-number="14"><span class="kw"><a href="../reference/getExtent.html">getExtent</a></span>(<span class="dt">x =</span> myInput)</a>
<a class="sourceLine" id="cb2-15" data-line-number="15"><span class="co">#&gt; # A tibble: 2 x 2</span></a>
<a class="sourceLine" id="cb2-16" data-line-number="16"><span class="co">#&gt;       x     y</span></a>
<a class="sourceLine" id="cb2-17" data-line-number="17"><span class="co">#&gt;   &lt;dbl&gt; &lt;dbl&gt;</span></a>
<a class="sourceLine" id="cb2-18" data-line-number="18"><span class="co">#&gt; 1 -84.3  33.9</span></a>
<a class="sourceLine" id="cb2-19" data-line-number="19"><span class="co">#&gt; 2 -75.5  36.6</span></a>
<a class="sourceLine" id="cb2-20" data-line-number="20"></a>
<a class="sourceLine" id="cb2-21" data-line-number="21">myInput &lt;-<span class="st"> </span>ras</a>
<a class="sourceLine" id="cb2-22" data-line-number="22"><span class="kw"><a href="../reference/getExtent.html">getExtent</a></span>(<span class="dt">x =</span> myInput)</a>
<a class="sourceLine" id="cb2-23" data-line-number="23"><span class="co">#&gt; # A tibble: 2 x 2</span></a>
<a class="sourceLine" id="cb2-24" data-line-number="24"><span class="co">#&gt;        x      y</span></a>
<a class="sourceLine" id="cb2-25" data-line-number="25"><span class="co">#&gt;    &lt;dbl&gt;  &lt;dbl&gt;</span></a>
<a class="sourceLine" id="cb2-26" data-line-number="26"><span class="co">#&gt; 1 178400 329400</span></a>
<a class="sourceLine" id="cb2-27" data-line-number="27"><span class="co">#&gt; 2 181600 334000</span></a></code></pre></div>
<p>The output of the getters provided by <code>geometr</code> is tidy, i.e., it provides variables in columns and observations in rows, and it is interoperable, i.e., it provides the same information in the same location of the output object, with the same names. This ensures, amongst other advantages, that a custom function that processes geometric information, requires merely one very simple row of code to extract those information from a potentially wide range of distinct classes.</p>
</div>
<div id="description-of-the-class-geom" class="section level1">
<h1 class="hasAnchor">
<a href="#description-of-the-class-geom" class="anchor"></a>Description of the class <code>geom</code>
</h1>
<p><code>geometr</code> comes with the S4 class <code>geom</code>. <code>geom</code> is a geometric (spatial) class that has been primarily developed for its interoperability and easy access.</p>
<p>This means also here that all objects of this class are structurally the same, that no slots are removed or added when modifying an object and that all properties are labelled with the same terms in each object of that class. This interoperability is true for objects representing point, line or polygon features, for objects that contain a single or several features and for objects that are either merely geometric or indeed spatial/geographic because they contain a coordinate reference system. A <code>geom</code> contains, moreover, only direct information, i.e., such information that can’t be derived from other of its information. A prominent example is the extent, which is not stored within a <code>geom</code> but within many other spatial classes (in R), and which can very simply be derived from the coordinate values of the points that make up the geometry.</p>
<div id="create-a-geom" class="section level2">
<h2 class="hasAnchor">
<a href="#create-a-geom" class="anchor"></a>Create a <code>geom</code>
</h2>
<p>A <code>geom</code> can be created simply by transforming it from another class (that is, any class for which a method has been defined), or by using one of the <em>geometry shape</em> functions that are labelled <code>gs_*</code> in <code>geometr</code>.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb3-1" data-line-number="1"><span class="co"># transform from class sf</span></a>
<a class="sourceLine" id="cb3-2" data-line-number="2">(nc_geom &lt;-<span class="st"> </span><span class="kw"><a href="../reference/gc_geom.html">gc_geom</a></span>(<span class="dt">input =</span> nc_sf))</a>
<a class="sourceLine" id="cb3-3" data-line-number="3"><span class="co">#&gt; geom        polygon</span></a>
<a class="sourceLine" id="cb3-4" data-line-number="4"><span class="co">#&gt;             108 features | 2529 points</span></a>
<a class="sourceLine" id="cb3-5" data-line-number="5"><span class="co">#&gt; crs         +proj=longlat +datum=NAD27 +no_defs</span></a>
<a class="sourceLine" id="cb3-6" data-line-number="6"><span class="co">#&gt; attributes  (features) AREA, PERIMETER, CNTY_, CNTY_ID, NAME, FIPS, FIPSNO, CRESS_ID, BIR74, ...</span></a>
<a class="sourceLine" id="cb3-7" data-line-number="7"><span class="co">#&gt; tiny map           36.59 </span></a>
<a class="sourceLine" id="cb3-8" data-line-number="8"><span class="co">#&gt;                    ◌ ○ ◌ ○        </span></a>
<a class="sourceLine" id="cb3-9" data-line-number="9"><span class="co">#&gt;                    ○ ○ ○ ○        </span></a>
<a class="sourceLine" id="cb3-10" data-line-number="10"><span class="co">#&gt;                    ◌ ◌ ○ ◌        </span></a>
<a class="sourceLine" id="cb3-11" data-line-number="11"><span class="co">#&gt;             -84.32 ◌ ◌ ◌ ◌ -75.46 </span></a>
<a class="sourceLine" id="cb3-12" data-line-number="12"><span class="co">#&gt;                    33.88</span></a>
<a class="sourceLine" id="cb3-13" data-line-number="13"></a>
<a class="sourceLine" id="cb3-14" data-line-number="14"><span class="co"># make "by hand"</span></a>
<a class="sourceLine" id="cb3-15" data-line-number="15"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(tibble)</a>
<a class="sourceLine" id="cb3-16" data-line-number="16">coords &lt;-<span class="st"> </span><span class="kw"><a href="https://tibble.tidyverse.org/reference/tibble.html">tibble</a></span>(<span class="dt">x =</span> <span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="dv">40</span>, <span class="dv">70</span>, <span class="dv">70</span>, <span class="dv">50</span>),</a>
<a class="sourceLine" id="cb3-17" data-line-number="17">                 <span class="dt">y =</span> <span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="dv">40</span>, <span class="dv">40</span>, <span class="dv">60</span>, <span class="dv">70</span>))</a>
<a class="sourceLine" id="cb3-18" data-line-number="18">(somePoints &lt;-<span class="st"> </span><span class="kw"><a href="../reference/gs_point.html">gs_point</a></span>(<span class="dt">anchor =</span> coords))</a>
<a class="sourceLine" id="cb3-19" data-line-number="19"><span class="co">#&gt; geom        point</span></a>
<a class="sourceLine" id="cb3-20" data-line-number="20"><span class="co">#&gt;             4 features | 4 points</span></a>
<a class="sourceLine" id="cb3-21" data-line-number="21"><span class="co">#&gt; crs         cartesian</span></a>
<a class="sourceLine" id="cb3-22" data-line-number="22"><span class="co">#&gt; attributes  --</span></a>
<a class="sourceLine" id="cb3-23" data-line-number="23"><span class="co">#&gt; tiny map       70 </span></a>
<a class="sourceLine" id="cb3-24" data-line-number="24"><span class="co">#&gt;                ◌ ◎ ◌ ◌    </span></a>
<a class="sourceLine" id="cb3-25" data-line-number="25"><span class="co">#&gt;                ◌ ◌ ◌ ◎    </span></a>
<a class="sourceLine" id="cb3-26" data-line-number="26"><span class="co">#&gt;                ◌ ◌ ◌ ◌    </span></a>
<a class="sourceLine" id="cb3-27" data-line-number="27"><span class="co">#&gt;             40 ◎ ◌ ◌ ◎ 70 </span></a>
<a class="sourceLine" id="cb3-28" data-line-number="28"><span class="co">#&gt;                40</span></a></code></pre></div>
<p>From these examples we learn something more about objects of class <code>geom</code>. <code>nc_geom</code> is made up of 108 polygon features (with 2529 points), has a coordinate reference system (crs) and a set of (feature) attributes. The attributes’ values are not shown by the print method of a <code>geom</code>, which is a more compact visualisation of the important information. Moreover, there is a “tiny map” that shows where the points of the respective <code>geom</code> are concentrated, which gives a rough but quick overview of the shape of the object. If there is less than 1/16th of all points in a section of the map, a ◌ is shown, for more than 1/16th but less than 1/8th this is ○, for more than 1/8th but less than 1/4th ◎ and for sections with more than 1/4th of points, this is ◉.</p>
<p><code>aPoly</code> is only made up of one feature with 5 points and a cartesian coordinate system. As a matter of fact, any <code>geom</code> that has no crs assigned is assumed to be a mere geometric object of which the values are valid for a cartesian coordinate system.</p>
</div>
<div id="how-are-polygons-handled" class="section level2">
<h2 class="hasAnchor">
<a href="#how-are-polygons-handled" class="anchor"></a>How are polygons handled?</h2>
<p>You might wonder why it shows 5 points for <code>aPoly</code>, while only 4 have been defined. This is due to how polygons are stored in a <code>geom</code>. A polygon is by definition a two-dimensional plane, in contrast to a line that has only one dimension, its length, and a point, which is dimensionless. A polygon and a line can be made up of the same points and a polygon is indeed nothing more than a sequence of lines (a path) that outlines the shape of the polygon. To then distinguish a line and polygon with the same points, it can be defined that a polygon <strong>must</strong> have duplicate start and end points, which would constitute a <em>closed path</em>.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb4-1" data-line-number="1">aPoly &lt;-<span class="st"> </span><span class="kw"><a href="../reference/gs_polygon.html">gs_polygon</a></span>(<span class="dt">anchor =</span> coords)</a>
<a class="sourceLine" id="cb4-2" data-line-number="2"></a>
<a class="sourceLine" id="cb4-3" data-line-number="3"><span class="kw"><a href="../reference/getPoints.html">getPoints</a></span>(<span class="dt">x =</span> somePoints)</a>
<a class="sourceLine" id="cb4-4" data-line-number="4"><span class="co">#&gt; # A tibble: 4 x 3</span></a>
<a class="sourceLine" id="cb4-5" data-line-number="5"><span class="co">#&gt;       x     y   fid</span></a>
<a class="sourceLine" id="cb4-6" data-line-number="6"><span class="co">#&gt;   &lt;dbl&gt; &lt;dbl&gt; &lt;int&gt;</span></a>
<a class="sourceLine" id="cb4-7" data-line-number="7"><span class="co">#&gt; 1    40    40     1</span></a>
<a class="sourceLine" id="cb4-8" data-line-number="8"><span class="co">#&gt; 2    70    40     2</span></a>
<a class="sourceLine" id="cb4-9" data-line-number="9"><span class="co">#&gt; 3    70    60     3</span></a>
<a class="sourceLine" id="cb4-10" data-line-number="10"><span class="co">#&gt; 4    50    70     4</span></a>
<a class="sourceLine" id="cb4-11" data-line-number="11"><span class="kw"><a href="../reference/getPoints.html">getPoints</a></span>(<span class="dt">x =</span> aPoly)</a>
<a class="sourceLine" id="cb4-12" data-line-number="12"><span class="co">#&gt; # A tibble: 5 x 3</span></a>
<a class="sourceLine" id="cb4-13" data-line-number="13"><span class="co">#&gt;       x     y   fid</span></a>
<a class="sourceLine" id="cb4-14" data-line-number="14"><span class="co">#&gt;   &lt;dbl&gt; &lt;dbl&gt; &lt;int&gt;</span></a>
<a class="sourceLine" id="cb4-15" data-line-number="15"><span class="co">#&gt; 1    40    40     1</span></a>
<a class="sourceLine" id="cb4-16" data-line-number="16"><span class="co">#&gt; 2    70    40     1</span></a>
<a class="sourceLine" id="cb4-17" data-line-number="17"><span class="co">#&gt; 3    70    60     1</span></a>
<a class="sourceLine" id="cb4-18" data-line-number="18"><span class="co">#&gt; 4    50    70     1</span></a>
<a class="sourceLine" id="cb4-19" data-line-number="19"><span class="co">#&gt; 5    40    40     1</span></a></code></pre></div>
<p>Polygons may also have holes (and islands therein), for example a park with a pond that has a little island in the middle. Such cases are of course also possible with a <code>geom</code> and the only thing to consider is that the outer (closed) ring must be given as first ring. All rings that are supposed to be nested within this ring must themselves be closed paths, but their order does not matter. Moreover, when building a polygon with hole in <code>geometr</code>, the rotation direction described by the sequence of the points does not matter. Whether part of a polygon is “inside”, and thus whether a closed path describes a hole or not, is determined by the code-logic of the functions processing polygons.</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb5-1" data-line-number="1">pond &lt;-<span class="st"> </span><span class="kw"><a href="https://tibble.tidyverse.org/reference/tibble.html">tibble</a></span>(<span class="dt">x =</span> <span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="dv">30</span>, <span class="dv">30</span>, <span class="dv">80</span>, <span class="dv">80</span>, <span class="dv">30</span>),</a>
<a class="sourceLine" id="cb5-2" data-line-number="2">               <span class="dt">y =</span> <span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="dv">30</span>, <span class="dv">80</span>, <span class="dv">80</span>, <span class="dv">30</span>, <span class="dv">30</span>),</a>
<a class="sourceLine" id="cb5-3" data-line-number="3">               <span class="dt">fid =</span> <span class="dv">1</span>)</a>
<a class="sourceLine" id="cb5-4" data-line-number="4">island &lt;-<span class="st"> </span><span class="kw"><a href="https://tibble.tidyverse.org/reference/tibble.html">tibble</a></span>(<span class="dt">x =</span> <span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="dv">60</span>, <span class="dv">65</span>, <span class="dv">65</span>, <span class="dv">60</span>, <span class="dv">60</span>),</a>
<a class="sourceLine" id="cb5-5" data-line-number="5">                <span class="dt">y =</span> <span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="dv">45</span>, <span class="dv">45</span>, <span class="dv">50</span>, <span class="dv">50</span>, <span class="dv">45</span>),</a>
<a class="sourceLine" id="cb5-6" data-line-number="6">                <span class="dt">fid =</span> <span class="dv">1</span>)</a>
<a class="sourceLine" id="cb5-7" data-line-number="7">temp &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/cbind.html">rbind</a></span>(pond, island, <span class="kw"><a href="../reference/getPoints.html">getPoints</a></span>(aPoly))</a>
<a class="sourceLine" id="cb5-8" data-line-number="8"></a>
<a class="sourceLine" id="cb5-9" data-line-number="9">perforatedPoly &lt;-<span class="st"> </span><span class="kw"><a href="../reference/gs_polygon.html">gs_polygon</a></span>(<span class="dt">anchor =</span> temp)</a>
<a class="sourceLine" id="cb5-10" data-line-number="10"><span class="kw"><a href="../reference/visualise.html">visualise</a></span>(perforatedPoly, <span class="dt">fillcol =</span> fid)</a></code></pre></div>
<p><img src="geometr_files/figure-html/unnamed-chunk-6-1.png" width="700"></p>
</div>
<div id="attributes-of-a-geom" class="section level2">
<h2 class="hasAnchor">
<a href="#attributes-of-a-geom" class="anchor"></a>Attributes of a <code>geom</code>
</h2>
<p>You may also be wondering why <code>nc_geom</code> has 108 features, while <code>nc_sf</code> has actually 100 features. <code>nc_sf</code> consists of 100 “<code>MULTIPOLYGONS</code>” where in fact only a small set of them are composed of several polygons. This is due the definition of simple features, where one “simple” feature can be of a <em>multi*</em> type that comprises several closed paths in the same object and which would thus be called <code>MULTIPOLYGON</code>. Yet, an object can also contain only a single closed path and still have the feature type <code>MULTIPOLYGON</code>. In <code>geometr</code> these inconsistencies are avoided because they require a lot of extra code logic that is, in my opinion, not worth the supposed flexibility. Hence, a <code>geom</code> breaks down <em>multi*</em>-features into their distinct closed paths, into “simpler features”, so to speak.</p>
<p>This, however, requires that the togetherness of <em>multi*</em>-features has to be captured in another way. A set of features can be regarded as belonging together when they share attributes, such as a group of islands that form a nation. To capture attributes of sets or groups of features, a <code>geom</code> has an additional attribute table, one that captures those group attributes. Moreover, also the list of points is treated as a separate, third attribute table, for attributes that only the points, but not the features (groups of points) have.</p>
<p>All three attribute tables can be accessed with specific getters.</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb6-1" data-line-number="1"><span class="kw"><a href="../reference/getPoints.html">getPoints</a></span>(<span class="dt">x =</span> nc_geom)</a>
<a class="sourceLine" id="cb6-2" data-line-number="2"><span class="co">#&gt; # A tibble: 2,529 x 3</span></a>
<a class="sourceLine" id="cb6-3" data-line-number="3"><span class="co">#&gt;        x     y   fid</span></a>
<a class="sourceLine" id="cb6-4" data-line-number="4"><span class="co">#&gt;    &lt;dbl&gt; &lt;dbl&gt; &lt;int&gt;</span></a>
<a class="sourceLine" id="cb6-5" data-line-number="5"><span class="co">#&gt;  1 -81.5  36.2     1</span></a>
<a class="sourceLine" id="cb6-6" data-line-number="6"><span class="co">#&gt;  2 -81.5  36.3     1</span></a>
<a class="sourceLine" id="cb6-7" data-line-number="7"><span class="co">#&gt;  3 -81.6  36.3     1</span></a>
<a class="sourceLine" id="cb6-8" data-line-number="8"><span class="co">#&gt;  4 -81.6  36.3     1</span></a>
<a class="sourceLine" id="cb6-9" data-line-number="9"><span class="co">#&gt;  5 -81.7  36.4     1</span></a>
<a class="sourceLine" id="cb6-10" data-line-number="10"><span class="co">#&gt;  6 -81.7  36.5     1</span></a>
<a class="sourceLine" id="cb6-11" data-line-number="11"><span class="co">#&gt;  7 -81.7  36.5     1</span></a>
<a class="sourceLine" id="cb6-12" data-line-number="12"><span class="co">#&gt;  8 -81.7  36.6     1</span></a>
<a class="sourceLine" id="cb6-13" data-line-number="13"><span class="co">#&gt;  9 -81.3  36.6     1</span></a>
<a class="sourceLine" id="cb6-14" data-line-number="14"><span class="co">#&gt; 10 -81.3  36.5     1</span></a>
<a class="sourceLine" id="cb6-15" data-line-number="15"><span class="co">#&gt; # … with 2,519 more rows</span></a>
<a class="sourceLine" id="cb6-16" data-line-number="16"></a>
<a class="sourceLine" id="cb6-17" data-line-number="17"><span class="kw"><a href="../reference/getFeatures.html">getFeatures</a></span>(<span class="dt">x =</span> nc_geom)</a>
<a class="sourceLine" id="cb6-18" data-line-number="18"><span class="co">#&gt; # A tibble: 108 x 16</span></a>
<a class="sourceLine" id="cb6-19" data-line-number="19"><span class="co">#&gt;      fid   gid  AREA PERIMETER CNTY_ CNTY_ID NAME  FIPS  FIPSNO CRESS_ID</span></a>
<a class="sourceLine" id="cb6-20" data-line-number="20"><span class="co">#&gt;    &lt;int&gt; &lt;int&gt; &lt;dbl&gt;     &lt;dbl&gt; &lt;dbl&gt;   &lt;dbl&gt; &lt;fct&gt; &lt;fct&gt;  &lt;dbl&gt;    &lt;int&gt;</span></a>
<a class="sourceLine" id="cb6-21" data-line-number="21"><span class="co">#&gt;  1     1     1 0.114      1.44  1825    1825 Ashe  37009  37009        5</span></a>
<a class="sourceLine" id="cb6-22" data-line-number="22"><span class="co">#&gt;  2     2     2 0.061      1.23  1827    1827 Alle… 37005  37005        3</span></a>
<a class="sourceLine" id="cb6-23" data-line-number="23"><span class="co">#&gt;  3     3     3 0.143      1.63  1828    1828 Surry 37171  37171       86</span></a>
<a class="sourceLine" id="cb6-24" data-line-number="24"><span class="co">#&gt;  4     4     4 0.07       2.97  1831    1831 Curr… 37053  37053       27</span></a>
<a class="sourceLine" id="cb6-25" data-line-number="25"><span class="co">#&gt;  5     5     4 0.07       2.97  1831    1831 Curr… 37053  37053       27</span></a>
<a class="sourceLine" id="cb6-26" data-line-number="26"><span class="co">#&gt;  6     6     4 0.07       2.97  1831    1831 Curr… 37053  37053       27</span></a>
<a class="sourceLine" id="cb6-27" data-line-number="27"><span class="co">#&gt;  7     7     5 0.153      2.21  1832    1832 Nort… 37131  37131       66</span></a>
<a class="sourceLine" id="cb6-28" data-line-number="28"><span class="co">#&gt;  8     8     6 0.097      1.67  1833    1833 Hert… 37091  37091       46</span></a>
<a class="sourceLine" id="cb6-29" data-line-number="29"><span class="co">#&gt;  9     9     7 0.062      1.55  1834    1834 Camd… 37029  37029       15</span></a>
<a class="sourceLine" id="cb6-30" data-line-number="30"><span class="co">#&gt; 10    10     8 0.091      1.28  1835    1835 Gates 37073  37073       37</span></a>
<a class="sourceLine" id="cb6-31" data-line-number="31"><span class="co">#&gt; # … with 98 more rows, and 6 more variables: BIR74 &lt;dbl&gt;, SID74 &lt;dbl&gt;,</span></a>
<a class="sourceLine" id="cb6-32" data-line-number="32"><span class="co">#&gt; #   NWBIR74 &lt;dbl&gt;, BIR79 &lt;dbl&gt;, SID79 &lt;dbl&gt;, NWBIR79 &lt;dbl&gt;</span></a>
<a class="sourceLine" id="cb6-33" data-line-number="33"></a>
<a class="sourceLine" id="cb6-34" data-line-number="34"><span class="kw"><a href="../reference/getGroups.html">getGroups</a></span>(<span class="dt">x =</span> nc_geom)</a>
<a class="sourceLine" id="cb6-35" data-line-number="35"><span class="co">#&gt; # A tibble: 100 x 1</span></a>
<a class="sourceLine" id="cb6-36" data-line-number="36"><span class="co">#&gt;      gid</span></a>
<a class="sourceLine" id="cb6-37" data-line-number="37"><span class="co">#&gt;    &lt;int&gt;</span></a>
<a class="sourceLine" id="cb6-38" data-line-number="38"><span class="co">#&gt;  1     1</span></a>
<a class="sourceLine" id="cb6-39" data-line-number="39"><span class="co">#&gt;  2     2</span></a>
<a class="sourceLine" id="cb6-40" data-line-number="40"><span class="co">#&gt;  3     3</span></a>
<a class="sourceLine" id="cb6-41" data-line-number="41"><span class="co">#&gt;  4     4</span></a>
<a class="sourceLine" id="cb6-42" data-line-number="42"><span class="co">#&gt;  5     5</span></a>
<a class="sourceLine" id="cb6-43" data-line-number="43"><span class="co">#&gt;  6     6</span></a>
<a class="sourceLine" id="cb6-44" data-line-number="44"><span class="co">#&gt;  7     7</span></a>
<a class="sourceLine" id="cb6-45" data-line-number="45"><span class="co">#&gt;  8     8</span></a>
<a class="sourceLine" id="cb6-46" data-line-number="46"><span class="co">#&gt;  9     9</span></a>
<a class="sourceLine" id="cb6-47" data-line-number="47"><span class="co">#&gt; 10    10</span></a>
<a class="sourceLine" id="cb6-48" data-line-number="48"><span class="co">#&gt; # … with 90 more rows</span></a></code></pre></div>
<p>We see that the tables contain ID variables, namely <code>fid</code> and <code>gid</code>, which were not part of the original object. Those allow identifying to which feature coordinates belong and which features form groups. We also see that the <code>feature</code>-table contains those 108 features and that, for instance, features four, five and six are “the same”, or at least have the same attributes. This makes no sense, obviously, so <code>gc_geom</code> has the argument <code>group = FALSE/TRUE</code> to set whether duplicate feature attributes are actually group attributes.</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb7-1" data-line-number="1">new_geom &lt;-<span class="st"> </span><span class="kw"><a href="../reference/gc_geom.html">gc_geom</a></span>(<span class="dt">input =</span> nc_sf, <span class="dt">group =</span> <span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb7-2" data-line-number="2"></a>
<a class="sourceLine" id="cb7-3" data-line-number="3"><span class="kw"><a href="../reference/getFeatures.html">getFeatures</a></span>(<span class="dt">x =</span> new_geom)</a>
<a class="sourceLine" id="cb7-4" data-line-number="4"><span class="co">#&gt; # A tibble: 108 x 2</span></a>
<a class="sourceLine" id="cb7-5" data-line-number="5"><span class="co">#&gt;      fid   gid</span></a>
<a class="sourceLine" id="cb7-6" data-line-number="6"><span class="co">#&gt;    &lt;int&gt; &lt;int&gt;</span></a>
<a class="sourceLine" id="cb7-7" data-line-number="7"><span class="co">#&gt;  1     1     1</span></a>
<a class="sourceLine" id="cb7-8" data-line-number="8"><span class="co">#&gt;  2     2     2</span></a>
<a class="sourceLine" id="cb7-9" data-line-number="9"><span class="co">#&gt;  3     3     3</span></a>
<a class="sourceLine" id="cb7-10" data-line-number="10"><span class="co">#&gt;  4     4     4</span></a>
<a class="sourceLine" id="cb7-11" data-line-number="11"><span class="co">#&gt;  5     5     4</span></a>
<a class="sourceLine" id="cb7-12" data-line-number="12"><span class="co">#&gt;  6     6     4</span></a>
<a class="sourceLine" id="cb7-13" data-line-number="13"><span class="co">#&gt;  7     7     5</span></a>
<a class="sourceLine" id="cb7-14" data-line-number="14"><span class="co">#&gt;  8     8     6</span></a>
<a class="sourceLine" id="cb7-15" data-line-number="15"><span class="co">#&gt;  9     9     7</span></a>
<a class="sourceLine" id="cb7-16" data-line-number="16"><span class="co">#&gt; 10    10     8</span></a>
<a class="sourceLine" id="cb7-17" data-line-number="17"><span class="co">#&gt; # … with 98 more rows</span></a>
<a class="sourceLine" id="cb7-18" data-line-number="18"></a>
<a class="sourceLine" id="cb7-19" data-line-number="19"><span class="kw"><a href="../reference/getGroups.html">getGroups</a></span>(<span class="dt">x =</span> new_geom)</a>
<a class="sourceLine" id="cb7-20" data-line-number="20"><span class="co">#&gt; # A tibble: 100 x 15</span></a>
<a class="sourceLine" id="cb7-21" data-line-number="21"><span class="co">#&gt;      gid  AREA PERIMETER CNTY_ CNTY_ID NAME  FIPS  FIPSNO CRESS_ID BIR74</span></a>
<a class="sourceLine" id="cb7-22" data-line-number="22"><span class="co">#&gt;    &lt;int&gt; &lt;dbl&gt;     &lt;dbl&gt; &lt;dbl&gt;   &lt;dbl&gt; &lt;fct&gt; &lt;fct&gt;  &lt;dbl&gt;    &lt;int&gt; &lt;dbl&gt;</span></a>
<a class="sourceLine" id="cb7-23" data-line-number="23"><span class="co">#&gt;  1     1 0.114      1.44  1825    1825 Ashe  37009  37009        5  1091</span></a>
<a class="sourceLine" id="cb7-24" data-line-number="24"><span class="co">#&gt;  2     2 0.061      1.23  1827    1827 Alle… 37005  37005        3   487</span></a>
<a class="sourceLine" id="cb7-25" data-line-number="25"><span class="co">#&gt;  3     3 0.143      1.63  1828    1828 Surry 37171  37171       86  3188</span></a>
<a class="sourceLine" id="cb7-26" data-line-number="26"><span class="co">#&gt;  4     4 0.07       2.97  1831    1831 Curr… 37053  37053       27   508</span></a>
<a class="sourceLine" id="cb7-27" data-line-number="27"><span class="co">#&gt;  5     5 0.153      2.21  1832    1832 Nort… 37131  37131       66  1421</span></a>
<a class="sourceLine" id="cb7-28" data-line-number="28"><span class="co">#&gt;  6     6 0.097      1.67  1833    1833 Hert… 37091  37091       46  1452</span></a>
<a class="sourceLine" id="cb7-29" data-line-number="29"><span class="co">#&gt;  7     7 0.062      1.55  1834    1834 Camd… 37029  37029       15   286</span></a>
<a class="sourceLine" id="cb7-30" data-line-number="30"><span class="co">#&gt;  8     8 0.091      1.28  1835    1835 Gates 37073  37073       37   420</span></a>
<a class="sourceLine" id="cb7-31" data-line-number="31"><span class="co">#&gt;  9     9 0.118      1.42  1836    1836 Warr… 37185  37185       93   968</span></a>
<a class="sourceLine" id="cb7-32" data-line-number="32"><span class="co">#&gt; 10    10 0.124      1.43  1837    1837 Stok… 37169  37169       85  1612</span></a>
<a class="sourceLine" id="cb7-33" data-line-number="33"><span class="co">#&gt; # … with 90 more rows, and 5 more variables: SID74 &lt;dbl&gt;, NWBIR74 &lt;dbl&gt;,</span></a>
<a class="sourceLine" id="cb7-34" data-line-number="34"><span class="co">#&gt; #   BIR79 &lt;dbl&gt;, SID79 &lt;dbl&gt;, NWBIR79 &lt;dbl&gt;</span></a></code></pre></div>
<p>It becomes clear, as mentioned above, that this approach to attribute tables makes the class <code>geom</code> quite flexible. One could for example assign some measurements of a point pattern (such as <a href="http://www.pommerening.org">Arne Pommerening’s</a> Clocaenog 6 sample data) to the attribute table of a point <code>geom</code> of that pattern.</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb8-1" data-line-number="1"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(readr)</a>
<a class="sourceLine" id="cb8-2" data-line-number="2"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(magrittr)</a>
<a class="sourceLine" id="cb8-3" data-line-number="3"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb8-4" data-line-number="4"><span class="co">#&gt; Attaching package: 'magrittr'</span></a>
<a class="sourceLine" id="cb8-5" data-line-number="5"><span class="co">#&gt; The following object is masked from 'package:raster':</span></a>
<a class="sourceLine" id="cb8-6" data-line-number="6"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb8-7" data-line-number="7"><span class="co">#&gt;     extract</span></a>
<a class="sourceLine" id="cb8-8" data-line-number="8">clocaenog &lt;-<span class="st"> </span><span class="kw"><a href="https://readr.tidyverse.org/reference/read_delim.html">read_delim</a></span>(<span class="dt">file =</span> <span class="st">"http://www.pommerening.org/wiki/images/d/dc/Clg6.txt"</span>, </a>
<a class="sourceLine" id="cb8-9" data-line-number="9">                        <span class="dt">delim =</span> <span class="st">"</span><span class="ch">\t</span><span class="st">"</span>, <span class="dt">col_types =</span> <span class="st">"iifdddd"</span>)</a>
<a class="sourceLine" id="cb8-10" data-line-number="10"></a>
<a class="sourceLine" id="cb8-11" data-line-number="11"><span class="co"># make geom of locations ...</span></a>
<a class="sourceLine" id="cb8-12" data-line-number="12">locations &lt;-<span class="st"> </span><span class="kw"><a href="https://tibble.tidyverse.org/reference/tibble.html">tibble</a></span>(<span class="dt">x =</span> clocaenog<span class="op">$</span>x,</a>
<a class="sourceLine" id="cb8-13" data-line-number="13">                    <span class="dt">y =</span> clocaenog<span class="op">$</span>y,</a>
<a class="sourceLine" id="cb8-14" data-line-number="14">                    <span class="dt">fid =</span> clocaenog<span class="op">$</span>Number)</a>
<a class="sourceLine" id="cb8-15" data-line-number="15">locations &lt;-<span class="st"> </span><span class="kw"><a href="../reference/gs_point.html">gs_point</a></span>(<span class="dt">anchor =</span> locations)</a>
<a class="sourceLine" id="cb8-16" data-line-number="16"></a>
<a class="sourceLine" id="cb8-17" data-line-number="17"><span class="co"># ... and a table of tree properties</span></a>
<a class="sourceLine" id="cb8-18" data-line-number="18">trees &lt;-<span class="st"> </span><span class="kw"><a href="https://tibble.tidyverse.org/reference/tibble.html">tibble</a></span>(<span class="dt">fid =</span> clocaenog<span class="op">$</span>Number,</a>
<a class="sourceLine" id="cb8-19" data-line-number="19">                <span class="dt">species =</span> clocaenog<span class="op">$</span>Species,</a>
<a class="sourceLine" id="cb8-20" data-line-number="20">                <span class="dt">dbh =</span> clocaenog<span class="op">$</span>dbh,</a>
<a class="sourceLine" id="cb8-21" data-line-number="21">                <span class="dt">height =</span> clocaenog<span class="op">$</span>ht)</a>
<a class="sourceLine" id="cb8-22" data-line-number="22"></a>
<a class="sourceLine" id="cb8-23" data-line-number="23"><span class="co"># set these as attribute table and select only trees with a height value</span></a>
<a class="sourceLine" id="cb8-24" data-line-number="24">trees &lt;-<span class="st"> </span><span class="kw"><a href="../reference/setFeatures.html">setFeatures</a></span>(<span class="dt">x =</span> locations, <span class="dt">table =</span> trees) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb8-25" data-line-number="25"><span class="st">  </span><span class="kw"><a href="../reference/getFeatures.html">getFeatures</a></span>(<span class="op">!</span><span class="kw"><a href="https://rdrr.io/r/base/NA.html">is.na</a></span>(height))</a>
<a class="sourceLine" id="cb8-26" data-line-number="26"></a>
<a class="sourceLine" id="cb8-27" data-line-number="27"><span class="co"># make the title</span></a>
<a class="sourceLine" id="cb8-28" data-line-number="28">treepoints &lt;-<span class="st"> </span><span class="kw"><a href="../reference/getPoints.html">getPoints</a></span>(<span class="dt">x =</span> trees)</a>
<a class="sourceLine" id="cb8-29" data-line-number="29">title &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/paste.html">paste0</a></span>(<span class="st">"Clocaenog - tree heights ("</span>, <span class="kw"><a href="https://rdrr.io/pkg/raster/man/dimensions.html">dim</a></span>(treepoints)[<span class="dv">1</span>], <span class="st">")"</span>)</a>
<a class="sourceLine" id="cb8-30" data-line-number="30"></a>
<a class="sourceLine" id="cb8-31" data-line-number="31"><span class="co"># and visualise</span></a>
<a class="sourceLine" id="cb8-32" data-line-number="32"><span class="kw"><a href="../reference/visualise.html">visualise</a></span>(<span class="op">!!</span>title <span class="op">:</span><span class="er">=</span><span class="st"> </span>trees, <span class="dt">linecol =</span> height)</a></code></pre></div>
<p><img src="geometr_files/figure-html/unnamed-chunk-9-1.png" width="700"></p>
</div>
<div id="data-provenance" class="section level2">
<h2 class="hasAnchor">
<a href="#data-provenance" class="anchor"></a>Data provenance</h2>
<p>An object of class <code>geom</code> contains, just like a <code>raster</code> the slot <code>@history</code>. This slot documents the <a href="https://en.wikipedia.org/wiki/Data_lineage" target="_blank">provenance</a> of that object, i.e., where it came from and how it has been modified. The function <code><a href="../reference/gc_geom.html">gc_geom()</a></code>, all <code>gs_*()</code> and all <code>gt_()*</code> functions attach information to the list the <code>@history</code> slot is. In case you want to make use of this slot, it can be set via <code><a href="../reference/setHistory.html">setHistory()</a></code>.</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb9-1" data-line-number="1"><span class="kw"><a href="../reference/visualise.html">visualise</a></span>(aPoly)</a>
<a class="sourceLine" id="cb9-2" data-line-number="2"></a>
<a class="sourceLine" id="cb9-3" data-line-number="3">reflPoly &lt;-<span class="st"> </span><span class="kw"><a href="../reference/gt_reflect.html">gt_reflect</a></span>(<span class="dt">geom =</span> aPoly, <span class="dt">angle =</span> <span class="dv">45</span>)</a>
<a class="sourceLine" id="cb9-4" data-line-number="4"></a>
<a class="sourceLine" id="cb9-5" data-line-number="5"><span class="kw"><a href="../reference/visualise.html">visualise</a></span>(reflPoly, <span class="dt">linecol =</span> <span class="st">"deeppink"</span>, <span class="dt">new =</span> <span class="ot">FALSE</span>, <span class="dt">trace =</span> <span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb9-6" data-line-number="6"><span class="co">#&gt; this object has the following history:</span></a>
<a class="sourceLine" id="cb9-7" data-line-number="7"><span class="co">#&gt;  -&gt; object was created as 'polygon' geom.</span></a>
<a class="sourceLine" id="cb9-8" data-line-number="8"><span class="co">#&gt;  -&gt; geom was reflected.</span></a></code></pre></div>
<p><img src="geometr_files/figure-html/unnamed-chunk-10-1.png" width="700"></p>
</div>
</div>
<div id="casting" class="section level1">
<h1 class="hasAnchor">
<a href="#casting" class="anchor"></a>Casting</h1>
<p>It is quite straightforward to cast from one feature type to another with <code>geometr</code>. As already mentioned above, all feature types (point, line and polygon) have the same arrangement and differ only in the slot <code>@type</code>. This means that the only element that needs to be changed to cast a any <code>geom</code> to another <code>geom</code> is the feature type. All <code>gs_*()</code> functions contain the argument <code>anchor =</code>, this is where location information for creating the output are provided. If what is provided here is already a <code>geom</code>, most of the location information and other properties can be (and in fact are) simply copied into the new object.</p>
<p>The following code chunk shows casting in <code>geometr</code>. When casting to polygons, vertex checks are carried out that make sure the output is a valid polygon. This results, as also described above, in the first/last point becoming duplicated to form a closed path. Consequently, those duplicates have to be handled, for example by removing duplicates.</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb10-1" data-line-number="1"><span class="co"># make points and discard duplicates ...</span></a>
<a class="sourceLine" id="cb10-2" data-line-number="2">(somePoints &lt;-<span class="st"> </span><span class="kw"><a href="../reference/gs_point.html">gs_point</a></span>(<span class="dt">anchor =</span> aPoly) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb10-3" data-line-number="3"><span class="st">  </span><span class="kw"><a href="../reference/getPoints.html">getPoints</a></span>(<span class="op">!</span>(<span class="kw"><a href="https://rdrr.io/r/base/duplicated.html">duplicated</a></span>(x) <span class="op">&amp;</span><span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/duplicated.html">duplicated</a></span>(y))))</a>
<a class="sourceLine" id="cb10-4" data-line-number="4"><span class="co">#&gt; geom        point</span></a>
<a class="sourceLine" id="cb10-5" data-line-number="5"><span class="co">#&gt;             1 feature | 4 points</span></a>
<a class="sourceLine" id="cb10-6" data-line-number="6"><span class="co">#&gt; crs         cartesian</span></a>
<a class="sourceLine" id="cb10-7" data-line-number="7"><span class="co">#&gt; attributes  --</span></a>
<a class="sourceLine" id="cb10-8" data-line-number="8"><span class="co">#&gt; tiny map       70 </span></a>
<a class="sourceLine" id="cb10-9" data-line-number="9"><span class="co">#&gt;                ◌ ◎ ◌ ◌    </span></a>
<a class="sourceLine" id="cb10-10" data-line-number="10"><span class="co">#&gt;                ◌ ◌ ◌ ◎    </span></a>
<a class="sourceLine" id="cb10-11" data-line-number="11"><span class="co">#&gt;                ◌ ◌ ◌ ◌    </span></a>
<a class="sourceLine" id="cb10-12" data-line-number="12"><span class="co">#&gt;             40 ◎ ◌ ◌ ◎ 70 </span></a>
<a class="sourceLine" id="cb10-13" data-line-number="13"><span class="co">#&gt;                40</span></a>
<a class="sourceLine" id="cb10-14" data-line-number="14"></a>
<a class="sourceLine" id="cb10-15" data-line-number="15"><span class="co"># ... and recreate (the same) polygon from that </span></a>
<a class="sourceLine" id="cb10-16" data-line-number="16">(aPoly &lt;-<span class="st"> </span><span class="kw"><a href="../reference/gs_polygon.html">gs_polygon</a></span>(<span class="dt">anchor =</span> somePoints))</a>
<a class="sourceLine" id="cb10-17" data-line-number="17"><span class="co">#&gt; geom        polygon</span></a>
<a class="sourceLine" id="cb10-18" data-line-number="18"><span class="co">#&gt;             1 feature | 5 points</span></a>
<a class="sourceLine" id="cb10-19" data-line-number="19"><span class="co">#&gt; crs         cartesian</span></a>
<a class="sourceLine" id="cb10-20" data-line-number="20"><span class="co">#&gt; attributes  --</span></a>
<a class="sourceLine" id="cb10-21" data-line-number="21"><span class="co">#&gt; tiny map       70 </span></a>
<a class="sourceLine" id="cb10-22" data-line-number="22"><span class="co">#&gt;                ◌ ◎ ◌ ◌    </span></a>
<a class="sourceLine" id="cb10-23" data-line-number="23"><span class="co">#&gt;                ◌ ◌ ◌ ◎    </span></a>
<a class="sourceLine" id="cb10-24" data-line-number="24"><span class="co">#&gt;                ◌ ◌ ◌ ◌    </span></a>
<a class="sourceLine" id="cb10-25" data-line-number="25"><span class="co">#&gt;             40 ◉ ◌ ◌ ◎ 70 </span></a>
<a class="sourceLine" id="cb10-26" data-line-number="26"><span class="co">#&gt;                40</span></a></code></pre></div>
</div>
<div id="visualising" class="section level1">
<h1 class="hasAnchor">
<a href="#visualising" class="anchor"></a>Visualising</h1>
<p>We saw already some quite powerful use-cases of the <code><a href="../reference/visualise.html">visualise()</a></code> function that comes with <code>geometr</code>. The philosophy of plotting geometric objects in <code>geometr</code> deviates a bit from other approaches.</p>
<p>The idea is that both vector and raster objects can be visualised at the same time, and that additional options can be specified for their appearance, and for the appearance of the other plot elements. In case several objects are provided to <code><a href="../reference/visualise.html">visualise()</a></code> at the same time, they are facetted, i.e., plotted in separate panels next to one another. Moreover, it is possible to set the plot title by providing a name to the object that shall be plotted, for example via <code>'plot name' = plotObject</code>. In case a title is not provided in that way, the title is either extracted from the object name (for example, the raster in the following example is part of the <code>RasterStack</code> <code>gtRasters</code> with the name <code>continuous</code>) or a default value is used.</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb11-1" data-line-number="1"><span class="kw"><a href="../reference/visualise.html">visualise</a></span>(<span class="st">'I made a polygon!'</span> =<span class="st"> </span>aPoly, gtRasters<span class="op">$</span>continuous)</a></code></pre></div>
<p><img src="geometr_files/figure-html/unnamed-chunk-12-1.png" width="700"></p>
<p>In case a <code>geom</code> is provided with a relative scale, the values are scaled between 0 and 1 and it is plotted by default relative to the plot extent. This allows, for example, to observe always the same region in a set of images, in which some signal changes, and eventually to extract the values. To this end, a <code>geom</code> would be provided with a reference window from which the relative values shall be derived and its’ coordinates are scaled to those values.</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb12-1" data-line-number="1">relPoly &lt;-<span class="st"> </span><span class="kw"><a href="../reference/gs_polygon.html">gs_rectangle</a></span>(<span class="dt">anchor =</span> aPoly) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb12-2" data-line-number="2"><span class="st">  </span><span class="kw"><a href="../reference/setWindow.html">setWindow</a></span>(<span class="dt">to =</span> <span class="kw"><a href="https://tibble.tidyverse.org/reference/tibble.html">tibble</a></span>(<span class="dt">x =</span> <span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="dv">0</span>, <span class="dv">100</span>), <span class="dt">y =</span> <span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="dv">0</span>, <span class="dv">100</span>))) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb12-3" data-line-number="3"><span class="st">  </span><span class="kw"><a href="../reference/gt_scale.html">gt_scale</a></span>(<span class="dt">to =</span> <span class="st">"relative"</span>)</a>
<a class="sourceLine" id="cb12-4" data-line-number="4"></a>
<a class="sourceLine" id="cb12-5" data-line-number="5"><span class="kw"><a href="../reference/visualise.html">visualise</a></span>(gtRasters<span class="op">$</span>categorical, gtRasters<span class="op">$</span>continuous)</a>
<a class="sourceLine" id="cb12-6" data-line-number="6"><span class="kw"><a href="../reference/visualise.html">visualise</a></span>(relPoly, <span class="dt">linecol =</span> <span class="st">"deeppink"</span>, <span class="dt">new =</span> F)</a></code></pre></div>
<p><img src="geometr_files/figure-html/unnamed-chunk-13-1.png" width="700"></p>
<p>In various functions of <code>geometr</code> the reference window can play a role, most prominently to control which part of an object is plotted. The window of any object that has been plotted here so far, other than <code>relPoly</code>, has been set implicitly, usually to the extent of that object. <code>relPoly</code> has been assigned with a reference window that is larger than its’ extent and this lead to an effect that could be described <em>zooming out</em>. Likewise, one could <em>zoom in</em> by assigning a reference window smaller than the extent of an object. The reference region for a plot can be set via the <code>window =</code> argument in <code><a href="../reference/visualise.html">visualise()</a></code>, which requires absolute values. To zoom in on <code>relPoly</code>, we thus have to assign the plot extent as window to <code>relPoly</code> and rescale the relative values to absolute values on that basis.</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb13-1" data-line-number="1">zoom &lt;-<span class="st"> </span><span class="kw"><a href="../reference/setWindow.html">setWindow</a></span>(<span class="dt">x =</span> relPoly, <span class="dt">to =</span> <span class="kw"><a href="../reference/getExtent.html">getExtent</a></span>(<span class="dt">x =</span> gtRasters<span class="op">$</span>categorical)) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb13-2" data-line-number="2"><span class="st">  </span><span class="kw"><a href="../reference/gt_scale.html">gt_scale</a></span>(<span class="dt">to =</span> <span class="st">"absolute"</span>)</a>
<a class="sourceLine" id="cb13-3" data-line-number="3"><span class="kw"><a href="../reference/visualise.html">visualise</a></span>(<span class="st">'zoomed object'</span> =<span class="st"> </span>gtRasters<span class="op">$</span>categorical, <span class="dt">window =</span> <span class="kw"><a href="../reference/getExtent.html">getExtent</a></span>(<span class="dt">x =</span> zoom))</a></code></pre></div>
<p><img src="geometr_files/figure-html/unnamed-chunk-14-1.png" width="700"></p>
<p><code><a href="../reference/visualise.html">visualise()</a></code> also allows to plot images, simply by providing an object that has the three layers <code>red</code>, <code>green</code> and <code>blue</code> and setting <code>image = TRUE</code>.</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb14-1" data-line-number="1">anImage &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/pkg/raster/man/brick.html">brick</a></span>(<span class="kw"><a href="https://rdrr.io/r/base/system.file.html">system.file</a></span>(<span class="st">"external/rlogo.grd"</span>, <span class="dt">package=</span><span class="st">"raster"</span>))</a>
<a class="sourceLine" id="cb14-2" data-line-number="2"><span class="kw"><a href="../reference/visualise.html">visualise</a></span>(<span class="st">'R logo'</span> =<span class="st"> </span>anImage, <span class="dt">image =</span> <span class="ot">TRUE</span>)</a></code></pre></div>
<p><img src="geometr_files/figure-html/unnamed-chunk-15-1.png" width="700"></p>
<p>To adjust the appearance of a plot one can either provide a theme for all plot elements or quick options for the plotted objects only.</p>
<div id="the-gttheme" class="section level3">
<h3 class="hasAnchor">
<a href="#the-gttheme" class="anchor"></a>The <code>gtTheme</code>
</h3>
<p>The theme controls how plots that are created with <code><a href="../reference/visualise.html">visualise()</a></code> appear. By default, this theme is <code>gtTheme</code> and it has the following properties.</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb15-1" data-line-number="1">gtTheme</a>
<a class="sourceLine" id="cb15-2" data-line-number="2"><span class="co">#&gt; ✔ title     in black with fontsize 16 </span></a>
<a class="sourceLine" id="cb15-3" data-line-number="3"><span class="co">#&gt; ✔ box       in grey with 1 wide solid lines </span></a>
<a class="sourceLine" id="cb15-4" data-line-number="4"><span class="co">#&gt; ✔ xAxis     with 4 bins and a margin of 5%</span></a>
<a class="sourceLine" id="cb15-5" data-line-number="5"><span class="co">#&gt; ✔  - label  'x' in black with fontsize 12</span></a>
<a class="sourceLine" id="cb15-6" data-line-number="6"><span class="co">#&gt; ✔  - ticks  in black with fontsize 10 rounded to 1 digit </span></a>
<a class="sourceLine" id="cb15-7" data-line-number="7"><span class="co">#&gt; ✔ yAxis     with 4 bins and a margin of 5%</span></a>
<a class="sourceLine" id="cb15-8" data-line-number="8"><span class="co">#&gt; ✔  - label  'y' in black with fontsize 12</span></a>
<a class="sourceLine" id="cb15-9" data-line-number="9"><span class="co">#&gt; ✔  - ticks  in black with fontsize 10 rounded to 1 digit </span></a>
<a class="sourceLine" id="cb15-10" data-line-number="10"><span class="co">#&gt; ✔ grid      in grey with 0.6 wide solid lines </span></a>
<a class="sourceLine" id="cb15-11" data-line-number="11"><span class="co">#&gt; ✔ legend    with values ordered ascending in 4 bins and a relative height of 0.6</span></a>
<a class="sourceLine" id="cb15-12" data-line-number="12"><span class="co">#&gt; ✔  - label  in black with fontsize 10</span></a>
<a class="sourceLine" id="cb15-13" data-line-number="13"><span class="co">#&gt; ✔  - box    in black with 0.2 wide solid lines </span></a>
<a class="sourceLine" id="cb15-14" data-line-number="14"><span class="co">#&gt; ✔ vector    with 'linecol' scaled to fid, 1 wide solid lines or points with size 0.5 of type 20</span></a>
<a class="sourceLine" id="cb15-15" data-line-number="15"><span class="co">#&gt; ✔ raster    with colours scaled to id</span></a></code></pre></div>
<p>A new theme can be created by modifying any of the elements (shown in yellow in the console), via the function <code><a href="../reference/setTheme.html">setTheme()</a></code>. <code>vector</code> and <code>raster</code> are provided with a <code>scale</code>, where it is noted that one of the properties is scaled to one of the attributes of the object. By default, the line colour (<code>linecol</code>) is scaled to the feature ID (<code>fid</code>) for <code>vector</code> objects and rasters are scaled to their unique values, or the ID of an optional <a href="https://rdrr.io/cran/raster/man/factor.html" target="_blank">attribute table</a>. For <code>vector</code> objects also other properties can be scaled, namely the point symbol (<code>pointsymbol</code>) and size (<code>pointsize</code>), the colour of points (also <code>linecol</code>), the line type (<code>linetype</code>) and width (<code>linewidth</code>) of lines and polygons and the fill colour of polygons (<code>fillcol</code>).</p>
<p>By default <code>gtTheme</code> contains only a single value for most properties (except colours), so when scaling a property, a sensible range needs to be specified. For example, to make a plot where each point represents the diameter of a tree, it would make sense to scale the points between values that resemble the tree diameter.</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb16-1" data-line-number="1">treeTheme &lt;-<span class="st"> </span><span class="kw"><a href="../reference/setTheme.html">setTheme</a></span>(<span class="dt">vector =</span> <span class="kw"><a href="https://rdrr.io/r/base/list.html">list</a></span>(<span class="dt">scale =</span> <span class="kw"><a href="https://rdrr.io/r/base/list.html">list</a></span>(<span class="dt">x =</span> <span class="st">"pointsize"</span>, <span class="dt">to =</span> <span class="st">"dbh"</span>), </a>
<a class="sourceLine" id="cb16-2" data-line-number="2">                                    <span class="dt">pointsize =</span> <span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="fl">0.05</span>, <span class="fl">0.77</span>)))</a>
<a class="sourceLine" id="cb16-3" data-line-number="3"><span class="kw"><a href="../reference/visualise.html">visualise</a></span>(<span class="st">`</span><span class="dt">Clocaenog - tree diameters</span><span class="st">`</span> =<span class="st"> </span>trees, <span class="dt">theme =</span> treeTheme)</a></code></pre></div>
<p><img src="geometr_files/figure-html/unnamed-chunk-17-1.png" width="700"></p>
<p>Alternatively, one could use quick options to set scaling, by providing the property to scale and the attribute to scale to as <code>property = attribute</code>, also for several properties at the same time.</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb17-1" data-line-number="1">treeTheme &lt;-<span class="st"> </span><span class="kw"><a href="../reference/setTheme.html">setTheme</a></span>(<span class="dt">vector =</span> <span class="kw"><a href="https://rdrr.io/r/base/list.html">list</a></span>(<span class="dt">pointsize =</span> <span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="fl">0.05</span>, <span class="fl">0.77</span>)))</a>
<a class="sourceLine" id="cb17-2" data-line-number="2"><span class="kw"><a href="../reference/visualise.html">visualise</a></span>(<span class="st">`</span><span class="dt">Clocaenog - tree diameters and heights</span><span class="st">`</span> =<span class="st"> </span>trees, <span class="dt">theme =</span> treeTheme,</a>
<a class="sourceLine" id="cb17-3" data-line-number="3">          <span class="dt">pointsize =</span> dbh, <span class="dt">linecol =</span> height)</a></code></pre></div>
<p><img src="geometr_files/figure-html/unnamed-chunk-18-1.png" width="700"></p>
<p>Colour palettes can be set by providing “waypoints” between which colours should be interpolated (see the documentation of <a href="https://rdrr.io/r/grDevices/colorRamp.html" target="_blank"><code>colorRamp</code></a>). By default, these are a darkish blue (<code>#00204D</code>) for low values and yellow (<code>#FFEA46</code>) for high values. When including additional values, or when building totally new palettes, the colour can be modified accordingly.</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb18-1" data-line-number="1">treeTheme &lt;-<span class="st"> </span><span class="kw"><a href="../reference/setTheme.html">setTheme</a></span>(<span class="dt">vector =</span> <span class="kw"><a href="https://rdrr.io/r/base/list.html">list</a></span>(<span class="dt">linecol =</span> <span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"#00204DFF"</span>, <span class="st">"#73D216FF"</span>, <span class="st">"#FFEA46FF"</span>, <span class="st">"#CC0000F0"</span>)))</a>
<a class="sourceLine" id="cb18-2" data-line-number="2"><span class="kw"><a href="../reference/visualise.html">visualise</a></span>(<span class="st">`</span><span class="dt">Clocaenog - tree heights</span><span class="st">`</span> =<span class="st"> </span>trees, <span class="dt">theme =</span> treeTheme, <span class="dt">linecol =</span> height)</a></code></pre></div>
<p><img src="geometr_files/figure-html/unnamed-chunk-19-1.png" width="700"></p>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">

        <div id="tocnav">
      <h2 class="hasAnchor">
<a href="#tocnav" class="anchor"></a>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li><a href="#introduction">Introduction</a></li>
      <li><a href="#interoperability">Interoperability</a></li>
      <li>
<a href="#description-of-the-class-geom">Description of the class <code>geom</code></a><ul class="nav nav-pills nav-stacked">
<li><a href="#create-a-geom">Create a <code>geom</code></a></li>
      <li><a href="#how-are-polygons-handled">How are polygons handled?</a></li>
      <li><a href="#attributes-of-a-geom">Attributes of a <code>geom</code></a></li>
      <li><a href="#data-provenance">Data provenance</a></li>
      </ul>
</li>
      <li><a href="#casting">Casting</a></li>
      <li><a href="#visualising">Visualising</a></li>
      </ul>
</div>
      </div>

</div>



      <footer><div class="copyright">
  <p>Developed by <a href="https://orcid.org/0000-0002-2958-0796">Steffen Ehrmann</a>.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.4.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
