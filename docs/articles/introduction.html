<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>geometr - Introduction • geometr</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/lumen/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- sticky kit --><script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="geometr - Introduction">
<meta property="og:description" content="">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">geometr</a>
        <span class="version label label-danger" data-toggle="tooltip" data-placement="bottom" title="Unreleased version">0.1.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../articles/introduction.html">Getting Started</a>
</li>
<li>
  <a href="../reference/index.html">
    <span class="fa fa-file-code-o"></span>
     
    Glossary
  </a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="../articles/usecases.html">
    <span class="far fa far fa-list-alt"></span>
     
    Use cases
  </a>
</li>
<li>
  <a href="../news/index.html">
    <span class="fa fa-newspaper-o"></span>
     
    News
  </a>
</li>
<li>
  <a href="https://github.com/EhrmannS/geometr">
    <span class="fa fa-github"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1>geometr - Introduction</h1>
                        <h4 class="author">Steffen Ehrmann</h4>
            
            <h4 class="date">2019-04-08</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/EhrmannS/geometr/blob/master/vignettes/introduction.Rmd"><code>vignettes/introduction.Rmd</code></a></small>
      <div class="hidden name"><code>introduction.Rmd</code></div>

    </div>

    
    
<div id="introduction" class="section level1">
<h1 class="hasAnchor">
<a href="#introduction" class="anchor"></a>Introduction</h1>
<p><code>geometr</code> was developed due to a perceived lack of functionality that would allow manipulating geometries at vertex level, and all the possible applications that follow thereof.</p>
<p>The idea of <code>geometr</code> is to enable you to create and process geometries intuitively, thereby turning you into a <a href="https://en.wikipedia.org/wiki/List_of_geometers">geometer</a>. Using <code>geometr</code> you typically provide a set of coordinates that outline geometries either as so-called anchor and control vertices (parametrisation), or by clicking into an open plot (sketching). Depending on the use-case, you’d then either modify individual vertices or the overall geometry.</p>
<p>Moreover, as there seems to be an ever increasing collection of spatial classes - to which <code>geometr</code> adds yet another - a standardised approach to deal with the properties of objects of those classes is proposed by <code>geometr</code>.</p>
<div id="a-new-geographicspatial-class-geom" class="section level2">
<h2 class="hasAnchor">
<a href="#a-new-geographicspatial-class-geom" class="anchor"></a>A new (geographic/spatial) class: <code>geom</code>
</h2>
<p><code>geometr</code> comes with the S4 class <code>geom</code>. A <code>geom</code> stores only those information that can’t be derived on the fly from its generic values. An example of derived information would be the extent/bounding box, which actually is a statistical measure, the range of coordinate values, and thus not a generic value of the geometry. Moreover, this class is deliberately by default not <em>geographic</em> in nature. It can be transformed into a geographic object by assigning a <em>coordinate reference system</em>. One could say the default CRS is the cartesian coordinate system.</p>
<p>We learn a lot about the class by simply creating and visualising a <code>geom</code>:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">library</a></span>(geometr)
<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">library</a></span>(tibble)

coords &lt;-<span class="st"> </span><span class="kw"><a href="https://tibble.tidyverse.org/reference/tibble.html">tibble</a></span>(<span class="dt">x =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="dv">40</span>, <span class="dv">70</span>, <span class="dv">70</span>, <span class="dv">50</span>),
                 <span class="dt">y =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="dv">40</span>, <span class="dv">40</span>, <span class="dv">60</span>, <span class="dv">70</span>),
                 <span class="dt">fid =</span> <span class="dv">1</span>)
(aGeom &lt;-<span class="st"> </span><span class="kw"><a href="../reference/gs_polygon.html">gs_polygon</a></span>(<span class="dt">anchor =</span> coords))
<span class="co">#&gt; class      : geom</span>
<span class="co">#&gt; type       : polygon</span>
<span class="co">#&gt; features   : 1  (4 vertices)</span>
<span class="co">#&gt; window     : 40, 70, 40, 70  (xmin, xmax, ymin, ymax)</span>
<span class="co">#&gt; extent     : 40, 70, 40, 70  (xmin, xmax, ymin, ymax)</span>
<span class="co">#&gt; scale      : absolute</span>
<span class="co">#&gt; crs        : NA</span>
<span class="co">#&gt; attributes : 2  (fid, gid)</span>
<span class="kw"><a href="../reference/visualise.html">visualise</a></span>(<span class="dt">geom =</span> aGeom)</code></pre></div>
<p><img src="introduction_files/figure-html/unnamed-chunk-1-1.png" width="100%"></p>
<p>As an S4 class, <code>geom</code> consists of a set of slots, which we can inspect with <code><a href="https://www.rdocumentation.org/packages/utils/topics/str">str()</a></code>:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="https://www.rdocumentation.org/packages/utils/topics/str">str</a></span>(aGeom)
<span class="co">#&gt; Formal class 'geom' [package "geometr"] with 7 slots</span>
<span class="co">#&gt;   ..@ type   : chr "polygon"</span>
<span class="co">#&gt;   ..@ vert   :Classes 'tbl_df', 'tbl' and 'data.frame':  4 obs. of  4 variables:</span>
<span class="co">#&gt;   .. ..$ fid: num [1:4] 1 1 1 1</span>
<span class="co">#&gt;   .. ..$ vid: int [1:4] 1 2 3 4</span>
<span class="co">#&gt;   .. ..$ x  : num [1:4] 40 70 70 50</span>
<span class="co">#&gt;   .. ..$ y  : num [1:4] 40 40 60 70</span>
<span class="co">#&gt;   ..@ attr   :Classes 'tbl_df', 'tbl' and 'data.frame':  1 obs. of  2 variables:</span>
<span class="co">#&gt;   .. ..$ fid: num 1</span>
<span class="co">#&gt;   .. ..$ gid: num 1</span>
<span class="co">#&gt;   ..@ window :Classes 'tbl_df', 'tbl' and 'data.frame':  4 obs. of  2 variables:</span>
<span class="co">#&gt;   .. ..$ x: num [1:4] 40 40 70 70</span>
<span class="co">#&gt;   .. ..$ y: num [1:4] 40 70 70 40</span>
<span class="co">#&gt;   ..@ scale  : chr "absolute"</span>
<span class="co">#&gt;   ..@ crs    : chr NA</span>
<span class="co">#&gt;   ..@ history:List of 1</span>
<span class="co">#&gt;   .. ..$ : chr "geometry was created as 'polygon'"</span></code></pre></div>
<p>The core of this class are three tables that characterise the coordinates, the feature attributes and the window. This presentation of coordinates and features in separate tables is an important aspect that distinguishes <code>geometr</code> from other spatial classes in R.</p>
<ul>
<li>The slot <code>@vert</code> is a table that contains all information related to the vertices, with one row for each vertex. By default there are at least the columns <code>fid</code> (feature ID), <code>vid</code> (vertex ID), <code>x</code> and <code>y</code>, the two-dimensional coordinate values. The feature ID relates coordinates to features and thus common attributes and the vertex ID enumerates all vertices per feature.</li>
<li>The slot <code>@attr</code> is a table that contains all feature attributes, with one row for each feature. By default there are at least the columns <code>fid</code> (feature ID) and <code>gid</code> (group ID). The group ID captures groups of features that would be part of the same <em>multi</em>feature in a “simple feature (<code>sf</code>) and is thus by default the same as <code>fid</code> except when the <code>geom</code> has been derived from a simple multi-feature.</li>
<li>The slot <code>@window</code> is a table that defines the frame within which the geometry would be plotted. This is sort of a second extent that may be bigger (or smaller) than <code>extent/bbox</code> and which determines the relative position of the vertices when plotting.</li>
</ul>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">window &lt;-<span class="st"> </span><span class="kw"><a href="https://tibble.tidyverse.org/reference/tibble.html">tibble</a></span>(<span class="dt">x =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="dv">0</span>, <span class="dv">80</span>),
                 <span class="dt">y =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="dv">0</span>, <span class="dv">80</span>))

aGeom &lt;-<span class="st"> </span><span class="kw"><a href="../reference/setWindow.html">setWindow</a></span>(<span class="dt">x =</span> aGeom, <span class="dt">to =</span> window)
<span class="kw"><a href="../reference/visualise.html">visualise</a></span>(<span class="dt">geom =</span> aGeom)</code></pre></div>
<p><img src="introduction_files/figure-html/unnamed-chunk-3-1.png" width="100%"></p>
<p>A <code>geom</code> either has the feature type:</p>
<ul>
<li>
<code>point</code>, when none of the vertices are connected to other vertices,</li>
<li>
<code>line</code>, where vertices with the same <code>fid</code> are connected following the sequence of their order, without the path closing in itself and</li>
<li>
<code>polygon</code>, where vertices with the same <code>fid</code> are connected following the sequence of their order and the path closes in on itself.</li>
</ul>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="../reference/visualise.html">visualise</a></span>(<span class="dt">geom =</span> gtGeoms<span class="op">$</span>polygon, <span class="dt">fillcol =</span> fid)
<span class="kw"><a href="../reference/visualise.html">visualise</a></span>(<span class="dt">geom =</span> gtGeoms<span class="op">$</span>line, <span class="dt">linecol =</span> <span class="st">"green"</span>, <span class="dt">new =</span> <span class="ot">FALSE</span>)
<span class="kw"><a href="../reference/visualise.html">visualise</a></span>(<span class="dt">geom =</span> gtGeoms<span class="op">$</span>point, <span class="dt">linecol =</span> <span class="st">"deeppink"</span>, <span class="dt">new =</span> <span class="ot">FALSE</span>)</code></pre></div>
<p><img src="introduction_files/figure-html/unnamed-chunk-4-1.png" width="100%"></p>
<p>Points and Lines are implemented quite straightforward in this data model, but polygons, which may contain holes, are a bit trickier. In <code>geometr</code> they are implemented as follows:</p>
<ul>
<li>All vertices with the same <code>fid</code> make up one polygon, irrespective of it containing holes or not.</li>
<li>The outer path/ring of a polygon is composed of all vertices until a duplicate of its first vertex occurs. This signals that all following vertices are part of another path/ring, which is a hole when it is inside the polygon and which consists of all vertices until a duplicate of it’s first vertex occurs.</li>
<li>This repeats until all vertices of the feature are processed.</li>
</ul>
</div>
<div id="getters-and-setters" class="section level2">
<h2 class="hasAnchor">
<a href="#getters-and-setters" class="anchor"></a>Getters and Setters</h2>
<p>Most properties of a <code>geom</code> are accessible via specific functions. They can thus be extracted, modified and re-assigned, which is the basis for various “meta-operations”, such as reprojecting or appending additional attributes to features.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Get properties of a geom</span>
<span class="kw"><a href="../reference/getVertices.html">getVertices</a></span>(<span class="dt">x =</span> gtGeoms<span class="op">$</span>polygon)
<span class="co">#&gt; # A tibble: 15 x 4</span>
<span class="co">#&gt;      fid   vid     x     y</span>
<span class="co">#&gt;    &lt;dbl&gt; &lt;int&gt; &lt;dbl&gt; &lt;dbl&gt;</span>
<span class="co">#&gt;  1     1     1     0     0</span>
<span class="co">#&gt;  2     1     2    10     0</span>
<span class="co">#&gt;  3     1     3    10    10</span>
<span class="co">#&gt;  4     1     4     0    10</span>
<span class="co">#&gt;  5     1     5     0     0</span>
<span class="co">#&gt;  6     1     6     1     1</span>
<span class="co">#&gt;  7     1     7     1     2</span>
<span class="co">#&gt;  8     1     8     2     2</span>
<span class="co">#&gt;  9     1     9     2     1</span>
<span class="co">#&gt; 10     1    10     1     1</span>
<span class="co">#&gt; 11     2     1    11    11</span>
<span class="co">#&gt; 12     2     2    11    12</span>
<span class="co">#&gt; 13     2     3    12    12</span>
<span class="co">#&gt; 14     2     4    12    11</span>
<span class="co">#&gt; 15     2     5    11    11</span>
<span class="kw"><a href="../reference/getTable.html">getTable</a></span>(<span class="dt">x =</span> gtGeoms<span class="op">$</span>polygon)
<span class="co">#&gt; # A tibble: 2 x 2</span>
<span class="co">#&gt;     fid   gid</span>
<span class="co">#&gt;   &lt;dbl&gt; &lt;dbl&gt;</span>
<span class="co">#&gt; 1     1     1</span>
<span class="co">#&gt; 2     2     2</span>
<span class="kw"><a href="../reference/getWindow.html">getWindow</a></span>(<span class="dt">x =</span> gtGeoms<span class="op">$</span>polygon)
<span class="co">#&gt; # A tibble: 4 x 2</span>
<span class="co">#&gt;       x     y</span>
<span class="co">#&gt;   &lt;dbl&gt; &lt;dbl&gt;</span>
<span class="co">#&gt; 1     0     0</span>
<span class="co">#&gt; 2     0    12</span>
<span class="co">#&gt; 3    12    12</span>
<span class="co">#&gt; 4    12     0</span>
<span class="kw"><a href="../reference/getCRS.html">getCRS</a></span>(<span class="dt">x =</span> gtGeoms<span class="op">$</span>polygon) <span class="co"># does not contain any value and is thus only valid in the cartesian coordinate system</span>
<span class="co">#&gt; [1] NA</span>
<span class="kw"><a href="../reference/getHistory.html">getHistory</a></span>(<span class="dt">x =</span> gtGeoms<span class="op">$</span>polygon)
<span class="co">#&gt; [[1]]</span>
<span class="co">#&gt; [1] "geometry was created as 'polygon'"</span>

<span class="co"># Set properties of a geom ...</span>
<span class="co"># ... such as feature attributes</span>
newAttrs &lt;-<span class="st"> </span><span class="kw"><a href="https://tibble.tidyverse.org/reference/tibble.html">tibble</a></span>(<span class="dt">fid =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="dv">2</span>, <span class="dv">1</span>), <span class="dt">weight =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="dv">10</span>, <span class="dv">5</span>))
newGeom &lt;-<span class="st"> </span><span class="kw"><a href="../reference/setTable.html">setTable</a></span>(<span class="dt">x =</span> gtGeoms<span class="op">$</span>polygon, <span class="dt">table =</span> newAttrs)
<span class="co">#&gt; Joining, by = "fid"</span>
<span class="kw"><a href="../reference/getTable.html">getTable</a></span>(<span class="dt">x =</span> newGeom)
<span class="co">#&gt; # A tibble: 2 x 3</span>
<span class="co">#&gt;     fid   gid weight</span>
<span class="co">#&gt;   &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt;</span>
<span class="co">#&gt; 1     1     1      5</span>
<span class="co">#&gt; 2     2     2     10</span>
<span class="kw"><a href="../reference/visualise.html">visualise</a></span>(<span class="dt">geom =</span> newGeom, <span class="dt">fillcol =</span> weight)</code></pre></div>
<p><img src="introduction_files/figure-html/unnamed-chunk-5-1.png" width="700"></p>
<p>In an attempt to standardise the handling of various different spatial formats, these functions have been developed as generics and they come with a couple of methods for the most-used spatial classes, such as <code>Raster*</code>, <code>sp</code>, <code>sf</code>. Originally this was developed to accommodate the modular nature of <code>rasterTools</code> but is now offered as a stand-alone. One can for instance use <code><a href="../reference/getVertices.html">getVertices()</a></code> to get a standardised output of the coordinate values across all supported spatial classes.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="../reference/getVertices.html">getVertices</a></span>(gtGeoms<span class="op">$</span>point)
<span class="co">#&gt; # A tibble: 12 x 4</span>
<span class="co">#&gt;      fid   vid     x     y</span>
<span class="co">#&gt;    &lt;int&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;</span>
<span class="co">#&gt;  1     1     1     0     0</span>
<span class="co">#&gt;  2     2     1     0    10</span>
<span class="co">#&gt;  3     3     1    10    10</span>
<span class="co">#&gt;  4     4     1    10     0</span>
<span class="co">#&gt;  5     5     1     1     1</span>
<span class="co">#&gt;  6     6     1     1     2</span>
<span class="co">#&gt;  7     7     1     2     2</span>
<span class="co">#&gt;  8     8     1     2     1</span>
<span class="co">#&gt;  9     9     1    11    11</span>
<span class="co">#&gt; 10    10     1    11    12</span>
<span class="co">#&gt; 11    11     1    12    12</span>
<span class="co">#&gt; 12    12     1    12    11</span>
<span class="kw"><a href="../reference/getVertices.html">getVertices</a></span>(gtSP<span class="op">$</span>SpatialMultiPoints)
<span class="co">#&gt; # A tibble: 8 x 4</span>
<span class="co">#&gt;     fid   vid     x     y</span>
<span class="co">#&gt;   &lt;int&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;</span>
<span class="co">#&gt; 1     1     1     0     0</span>
<span class="co">#&gt; 2     2     1    10     0</span>
<span class="co">#&gt; 3     3     1    10    10</span>
<span class="co">#&gt; 4     4     1     0    10</span>
<span class="co">#&gt; 5     5     1    11    11</span>
<span class="co">#&gt; 6     6     1    11    12</span>
<span class="co">#&gt; 7     7     1    12    12</span>
<span class="co">#&gt; 8     8     1    12    11</span>
<span class="kw"><a href="../reference/getVertices.html">getVertices</a></span>(gtSF<span class="op">$</span>multipoint)
<span class="co">#&gt; # A tibble: 8 x 4</span>
<span class="co">#&gt;     fid   vid     x     y</span>
<span class="co">#&gt;   &lt;int&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;</span>
<span class="co">#&gt; 1     1     1     0     0</span>
<span class="co">#&gt; 2     2     1    10     0</span>
<span class="co">#&gt; 3     3     1    10    10</span>
<span class="co">#&gt; 4     4     1     0    10</span>
<span class="co">#&gt; 5     5     1    11    11</span>
<span class="co">#&gt; 6     6     1    11    12</span>
<span class="co">#&gt; 7     7     1    12    12</span>
<span class="co">#&gt; 8     8     1    12    11</span></code></pre></div>
</div>
<div id="rationale" class="section level2">
<h2 class="hasAnchor">
<a href="#rationale" class="anchor"></a>Rationale</h2>
<p>To outline the rationale for starting the development of <code>geometr</code>, I first want to describe the aspects of <code>sp</code> and <code>sf</code> that seemed improvable to me.</p>
<p>All this makes clear that <code>geom</code> is an improvement of the <code>sp</code> classes with a stance on storing geometric information that differes from the <code>sf</code> classes. The aim is to clearly separate geometric information and feature attributes and thereby make the geometric information more accessible.</p>
<p>While <code>geometr</code> relates geometry and attributes by assigning the same <code>fid</code> to both, <code>sf</code> achieves this by storing them in the same row. <code>sf</code> confuses this trick with simplicity and relies at the same time on introducing the classes</p>
<ul>
<li>
<code>sf</code>, which comprises attributes and geometries of one simple feature,</li>
<li>
<code>sfg</code>, which comprises only the geometry of one simple feature and</li>
<li>
<code>sfc</code>, which represents the geometries of all simple features and thus spans, in contrast to the former two, across all simple features.</li>
</ul>
<p>While <code>sf</code> makes geometries accessible to the tidy workflow, it replaces the list-apocalypsis of the <code>sp</code> package with the class-disaster we find now.</p>
<p><code>geometr</code> is clearly superior to <code>sp</code> classes because both coordinates and attributes, including an ID that clearly relates them, are available as properly accessible <code>data.frames/tibbles</code>. Both, coordinates and attributes can be easily retrieved either by calling the respective getters or by a simple call to the <code>@</code> function.</p>
<p>Separating coordinates and features allows addressing coordinates just as simply as features and separately from each other</p>
<p>I am interested in addressing each single feature, also in a multi-feature. this can be achieved by calling the fid or the gid, if interested in the multi*feature</p>
<p><a href="http://strimas.com/r/tidy-sf/" class="uri">http://strimas.com/r/tidy-sf/</a></p>
<p><strong>sf increases complexity, the listed nature of geometries requires additional code-logic to extract geometric information; too many classes with different behaviour, which renders re-use of code/scripts overly complicated</strong></p>
<p><strong><a href="https://r-spatial.github.io/sf/articles/sf1.html**" class="uri">https://r-spatial.github.io/sf/articles/sf1.html**</a> </strong>problem with “multi* features”; for me the “multi”-nature is not part of the feature, but is an attribute, hence I have set up everything so that there are no multi-features and that the features that are transformed from other spatial classes contain a column <code>grp</code> that captures this informaiton. with the function <code>gGroup()</code> one can then add groups also to non-multi-features**</p>
</div>
<div id="example-workflow" class="section level2">
<h2 class="hasAnchor">
<a href="#example-workflow" class="anchor"></a>Example workflow</h2>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">library</a></span>(sf)
<span class="co">#&gt; Linking to GEOS 3.5.1, GDAL 2.2.2, PROJ 4.9.2</span>
nc &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/sf/topics/st_read">st_read</a></span>(<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/system.file">system.file</a></span>(<span class="st">"shape/nc.shp"</span>, <span class="dt">package=</span><span class="st">"sf"</span>))
<span class="co">#&gt; Reading layer `nc' from data source `/home/steffen/R/x86_64-pc-linux-gnu-library/3.5/sf/shape/nc.shp' using driver `ESRI Shapefile'</span>
<span class="co">#&gt; Simple feature collection with 100 features and 14 fields</span>
<span class="co">#&gt; geometry type:  MULTIPOLYGON</span>
<span class="co">#&gt; dimension:      XY</span>
<span class="co">#&gt; bbox:           xmin: -84.32385 ymin: 33.88199 xmax: -75.45698 ymax: 36.58965</span>
<span class="co">#&gt; epsg (SRID):    4267</span>
<span class="co">#&gt; proj4string:    +proj=longlat +datum=NAD27 +no_defs</span>

<span class="kw"><a href="../reference/visualise.html">visualise</a></span>(<span class="dt">geom =</span> <span class="kw"><a href="../reference/gt_sf.html">gt_sf</a></span>(nc), <span class="dt">fillcol =</span> NWBIR74)</code></pre></div>
<p><img src="introduction_files/figure-html/unnamed-chunk-8-1.png" width="100%"></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">
coords &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/sf/topics/tibble">tibble</a></span>(<span class="dt">x =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="dv">30</span>, <span class="dv">60</span>, <span class="dv">60</span>, <span class="dv">40</span>, <span class="dv">10</span>, <span class="dv">40</span>, <span class="dv">20</span>),
                 <span class="dt">y =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="dv">40</span>, <span class="dv">40</span>, <span class="dv">60</span>, <span class="dv">70</span>, <span class="dv">10</span>, <span class="dv">20</span>, <span class="dv">40</span>),
                 <span class="dt">fid =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">2</span>, <span class="dv">2</span>))

twoGeoms &lt;-<span class="st"> </span><span class="kw"><a href="../reference/gs_polygon.html">gs_polygon</a></span>(<span class="dt">anchor =</span> coords, <span class="dt">window =</span> window)
<span class="kw"><a href="../reference/visualise.html">visualise</a></span>(<span class="dt">geom =</span> twoGeoms)

rotatedGeoms &lt;-<span class="st"> </span><span class="kw"><a href="../reference/gt_rotate.html">gt_rotate</a></span>(<span class="dt">geom =</span> twoGeoms, <span class="dt">angle =</span> <span class="dv">90</span>, <span class="dt">about =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="dv">40</span>, <span class="dv">40</span>))
<span class="kw"><a href="../reference/visualise.html">visualise</a></span>(<span class="dt">geom =</span> rotatedGeoms, <span class="dt">new =</span> <span class="ot">FALSE</span>)</code></pre></div>
<p><img src="introduction_files/figure-html/unnamed-chunk-9-1.png" width="700"></p>
<p>An object of class <code>geom</code> can be created with various functions, such as the default <code><a href="../reference/gs_point.html">gs_point()</a></code>, <code>gs_curve()</code> and <code><a href="../reference/gs_polygon.html">gs_polygon()</a></code> but also with functions that create specific geometric shapes such as <code><a href="../reference/gs_polygon.html">gs_hexagon()</a></code>, which creates exclusively hexagonal polygons, or <code><a href="../reference/gs_tiles.html">gs_tiles()</a></code>, which creates a regular tiling geometry.</p>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
        <div id="tocnav">
      <h2 class="hasAnchor">
<a href="#tocnav" class="anchor"></a>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li>
<a href="#introduction">Introduction</a><ul class="nav nav-pills nav-stacked">
<li><a href="#a-new-geographicspatial-class-geom">A new (geographic/spatial) class: <code>geom</code></a></li>
      <li><a href="#getters-and-setters">Getters and Setters</a></li>
      <li><a href="#rationale">Rationale</a></li>
      <li><a href="#example-workflow">Example workflow</a></li>
      </ul>
</li>
      </ul>
</div>
      </div>

</div>


      <footer><div class="copyright">
  <p>Developed by <a href="https://orcid.org/0000-0002-2958-0796">Steffen Ehrmann</a>.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.3.0.</p>
</div>
      </footer>
</div>

  

  </body>
</html>
